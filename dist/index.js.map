{"version":3,"file":"index.js","sources":["../src/Router.tsx","../src/funcs.tsx","../src/Link.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\n\r\nconst hashReader = (str: string) => {\r\n  const patt1 = /[0-9]/g\r\n  const patt2 = /[a-zA-Z]/g\r\n  if (!str) return { numbers: '', letters: '' }\r\n  const letters = str.match(patt2)?.join('')\r\n  const digits = str.match(patt1)?.join('')\r\n  return { letters, digits }\r\n}\r\n\r\nconst Router: (props: {\r\n  path?: string\r\n  hash?: string\r\n  onCallback?: () => void\r\n  children: React.ReactNode\r\n}) => JSX.Element | null = ({ path, hash, children, onCallback }) => {\r\n  const [currentPath, setCurrentPath] = useState(window.location.pathname)\r\n  const [currentHash, setCurrentHash] = useState(window.location.hash)\r\n\r\n  useEffect(() => {\r\n    const onLocationChange = () => {\r\n      setCurrentPath(window.location.pathname)\r\n      setCurrentHash(window.location.hash)\r\n      {\r\n        onCallback ? onCallback() : null\r\n      }\r\n    }\r\n    const onHashChange = () => {\r\n      setCurrentPath(window.location.pathname)\r\n      setCurrentHash(window.location.hash)\r\n      {\r\n        onCallback ? onCallback() : null\r\n      }\r\n    }\r\n    window.addEventListener('popstate', onLocationChange)\r\n    window.addEventListener('hashchange', onHashChange)\r\n    return () => {\r\n      window.removeEventListener('popstate', onLocationChange)\r\n      window.removeEventListener('hashchange', onHashChange)\r\n    }\r\n  }, [])\r\n\r\n  if (currentHash) {\r\n    const { letters } = hashReader(currentHash)\r\n    if (letters === hash) return children as JSX.Element\r\n    else return null\r\n  } else {\r\n    return currentPath === path ? (children as JSX.Element) : null\r\n  }\r\n}\r\n\r\nexport default Router\r\n","import React from 'react'\r\nimport Router from './Router'\r\n\r\nconst getRoutes = (\r\n  routes: {\r\n    path?: string\r\n    hash?: string\r\n    component: React.FunctionComponent\r\n    onCallback?: () => void\r\n  }[],\r\n  notFound?: React.FunctionComponent\r\n) => {\r\n  const notFoundComp = () => {\r\n    return notFound ? notFound : <div>404</div>\r\n  }\r\n  return routes.map((prop, key) => {\r\n    return Router ? (\r\n      <Router\r\n        path={prop.path}\r\n        hash={prop.hash}\r\n        key={key}\r\n        onCallback={prop.onCallback}\r\n      >\r\n        <prop.component />\r\n      </Router>\r\n    ) : (\r\n      notFoundComp\r\n    )\r\n  })\r\n}\r\n\r\nexport default getRoutes\r\n","import React from 'react'\r\n\r\nconst Link: (Props: {\r\n  href: string\r\n  className: string\r\n  children: React.ReactNode\r\n  onClick?: () => void\r\n}) => JSX.Element = ({ className, href, children, onClick }) => {\r\n  function dispatchHashchange() {\r\n    if (typeof HashChangeEvent !== 'undefined') {\r\n      window.dispatchEvent(new HashChangeEvent('hashchange'))\r\n      return\r\n    }\r\n    try {\r\n      window.dispatchEvent(new Event('hashchange'))\r\n      return\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n    const ieEvent = document.createEvent('Event')\r\n    ieEvent.initEvent('hashchange', true, true)\r\n    window.dispatchEvent(ieEvent)\r\n  }\r\n\r\n  const onClickLink = (event: React.MouseEvent<HTMLElement>) => {\r\n    event.preventDefault()\r\n    dispatchHashchange()\r\n    if (event.metaKey || event.ctrlKey) {\r\n      return\r\n    }\r\n    {\r\n      onClick ? onClick() : null\r\n    }\r\n    window.history.pushState({}, '', href)\r\n    const navEvent = new PopStateEvent('popstate')\r\n    window.dispatchEvent(navEvent)\r\n  }\r\n\r\n  return (\r\n    <a className={className} href={href} onClick={onClickLink}>\r\n      {children}\r\n    </a>\r\n  )\r\n}\r\n\r\nexport default Link\r\n"],"names":["hashReader","str","patt1","patt2","numbers","letters","match","join","digits","Router","path","hash","children","onCallback","useState","window","location","pathname","currentPath","setCurrentPath","currentHash","setCurrentHash","useEffect","onLocationChange","onHashChange","addEventListener","removeEventListener","getRoutes","routes","notFound","notFoundComp","React","map","prop","key","component","Link","className","href","onClick","dispatchHashchange","HashChangeEvent","dispatchEvent","Event","error","console","log","ieEvent","document","createEvent","initEvent","onClickLink","event","preventDefault","metaKey","ctrlKey","history","pushState","navEvent","PopStateEvent"],"mappings":"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"}